(this.webpackJsonptenttiapp=this.webpackJsonptenttiapp||[]).push([[0],{101:function(e,t,n){},125:function(e,t,n){"use strict";n.r(t);var a=n(2),r=n(0),c=n.n(r),o=n(16),s=n.n(o),i=(n(99),n(4)),u=n.n(i),l=n(9),j=n(8),p=(n(101),n(23)),f=n(18),d=n(10),h=n.n(d),b=n(156),O=n(160),x=n(161),m=n(162),v=function(e){var t=e.token,n=e.logOut,r=e.changeLanguage,c=e.websocket;return Object(a.jsx)(b.a,{position:"static",children:Object(a.jsxs)(O.a,{children:[Object(a.jsx)(x.a,{component:p.b,to:"/",style:{color:"white"},children:t?Object(a.jsx)(m.a,{id:"header.home"}):Object(a.jsx)(m.a,{id:"header.login"})}),t?Object(a.jsxs)(x.a,{component:p.b,to:"/course",style:{color:"white"},children:[" ",Object(a.jsx)(m.a,{id:"header.courses"})," "]}):"",t?"":Object(a.jsxs)(x.a,{component:p.b,to:"/register",style:{color:"white"},children:[" ",Object(a.jsx)(m.a,{id:"header.register"})," "]}),t?Object(a.jsxs)(x.a,{onClick:n,component:p.b,to:"/",style:{color:"white"},children:[" ",Object(a.jsx)(m.a,{id:"header.logout"})," "]}):"",Object(a.jsxs)(x.a,{onClick:r,children:[" ",Object(a.jsx)(m.a,{id:"header.language"})," "]}),Object(a.jsx)(x.a,{component:p.b,to:"/dropzone",children:" Dropzone "}),Object(a.jsx)(x.a,{onClick:function(){c.send(JSON.stringify({type:"all",message:"Websocket Message Sent!"}))},children:" WebSocket Message "})]})})},g=n(39),k=n.n(g),w=n(163),y=n(164),S=n(166),C=n(59),N=function(e){var t=e.examid;Object(f.f)();var n=Object(r.useState)([]),c=Object(j.a)(n,2),o=c[0],s=c[1],i=Object(r.useState)([]),p=Object(j.a)(i,2),d=p[0],b=p[1],O=Object(r.useState)(!1),v=Object(j.a)(O,2),g=v[0],k=v[1],N=function(){var e=Object(l.a)(u.a.mark((function e(){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,h.a.get("http://localhost:3001/exam/".concat(t,"/question")).then((function(e){s(e.data)}));case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),I=function(){var e=Object(l.a)(u.a.mark((function e(){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,h.a.get("http://localhost:3001/exam/".concat(t,"/choice")).then((function(e){b(e.data)}));case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),q=function(){var e=Object(l.a)(u.a.mark((function e(t){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,h.a.delete("http://localhost:3001/delete/question/".concat(t));case 2:k(!g);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),F=function(){var e=Object(l.a)(u.a.mark((function e(t){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,h.a.delete("http://localhost:3001/delete/choice/".concat(t));case 2:k(!g);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),T=function(){var e=Object(l.a)(u.a.mark((function e(n){var a;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a={id:n,examid:t},e.next=3,h.a.put("http://localhost:3001/edit/add/choice/",a);case 3:k(!g);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),E=function(){var e=Object(l.a)(u.a.mark((function e(){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,h.a.post("http://localhost:3001/add/question/".concat(t));case 2:k(!g);case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),J=function(){var e=Object(l.a)(u.a.mark((function e(n,a){var r;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r={id:n,name:a,examid:t},e.next=3,h.a.put("http://localhost:3001/edit/update/question/",r);case 3:k(!g);case 4:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),D=function(){var e=Object(l.a)(u.a.mark((function e(n,a){var r;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r={id:n,name:a,examid:t},e.next=3,h.a.put("http://localhost:3001/edit/update/choice/",r);case 3:k(!g);case 4:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),z=function(){var e=Object(l.a)(u.a.mark((function e(n,a){var r;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r={id:n,correct:a,examid:t},e.next=3,h.a.put("http://localhost:3001/edit/update/correct/",r);case 3:k(!g);case 4:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}();return Object(r.useEffect)((function(){N(),I()}),[g,t]),o.length<1?Object(a.jsx)(a.Fragment,{}):Object(a.jsxs)(a.Fragment,{children:[o.map((function(e){return Object(a.jsxs)(w.a,{className:"kortti",children:[Object(a.jsx)("div",{className:"sulkuNappi",children:Object(a.jsx)(x.a,{onClick:function(){return q(e.id)},color:"secondary",children:"\xd7"})}),Object(a.jsx)(y.a,{defaultValue:e.question,style:{width:"90%"},onBlur:function(t){return J(e.id,t.target.value)}}),d.filter((function(t){return t.questionid===e.id&&null!==t.id})).map((function(t){return Object(a.jsxs)("div",{children:[Object(a.jsx)(S.a,{checked:t.correct,style:{color:C.a[500]},name:e.question+" "+e.id,onChange:function(e){return z(t.id,e.target.checked)}}),Object(a.jsx)(y.a,{defaultValue:t.choice,style:{width:"50%"},onBlur:function(e){return D(t.id,e.target.value)}}),Object(a.jsx)(x.a,{onClick:function(){return F(t.id)},color:"secondary",children:"\xd7"})]})})),Object(a.jsx)(x.a,{onClick:function(){return T(e.id)},color:"primary",children:"+"})]})})),Object(a.jsx)(a.Fragment,{children:Object(a.jsxs)(x.a,{onClick:E,color:"primary",children:[" ",Object(a.jsx)(m.a,{id:"question.newquestion"})," "]})})]})},I=function(e){var t=e.examid,n=e.userid,c=Object(r.useState)([]),o=Object(j.a)(c,2),s=o[0],i=o[1],p=Object(r.useState)([]),f=Object(j.a)(p,2),d=f[0],b=f[1],O=Object(r.useState)(!1),m=Object(j.a)(O,2),v=m[0],g=(m[1],Object(r.useState)([])),y=Object(j.a)(g,2),N=(y[0],y[1],Object(r.useState)(!1)),I=Object(j.a)(N,2),q=I[0],F=I[1],T=function(){var e=Object(l.a)(u.a.mark((function e(){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,h.a.get("http://localhost:3001/exam/".concat(t,"/question")).then((function(e){i(e.data)}));case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),E=function(){var e=Object(l.a)(u.a.mark((function e(){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,h.a.get("http://localhost:3001/exam/".concat(t,"/answer/").concat(n)).then((function(e){b(e.data)}));case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),J=function(){var e=Object(l.a)(u.a.mark((function e(a,r){var c;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c={exam:t,user:n,choice:a,value:r},e.next=3,h.a.put("http://localhost:3001/update/answer/",c);case 3:F(!q);case 4:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),D=function(){var e=Object(l.a)(u.a.mark((function e(){var a;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a={exam:t,user:n},e.next=3,h.a.put("http://localhost:3001/finished/",a);case 3:F(!q);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(r.useEffect)((function(){T(),E()}),[q,t]),Object(a.jsxs)("div",{children:[s.map((function(e){return Object(a.jsxs)(w.a,{className:"kortti",children:[Object(a.jsx)("div",{children:e.question}),d.filter((function(t){return t.questionid===e.id&&null!==t.choiceid})).map((function(e){return Object(a.jsxs)("div",{children:[Object(a.jsx)(S.a,{checked:e.answer,disabled:v,onChange:function(t){return J(e.choiceid,t.target.checked)}}),Object(a.jsx)(S.a,{style:{color:C.a[500]},checked:e.correct}),Object(a.jsx)("label",{children:e.name})]},k()())}))]},k()())})),Object(a.jsx)(a.Fragment,{children:Object(a.jsx)(x.a,{onClick:D,variant:"contained",color:"primary",children:" Valmis "})})]})},q=function(e){var t=e.token,n=e.profile,c=e.examid,o=Object(r.useState)(t),s=Object(j.a)(o,2),i=s[0],p=s[1],f=Object(r.useState)(n),d=Object(j.a)(f,2),b=d[0],O=d[1],x=Object(r.useState)(c),m=Object(j.a)(x,2),v=m[0],g=m[1],k=function(){var e=Object(l.a)(u.a.mark((function e(){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:p(localStorage.getItem("token"));case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),w=function(){var e=Object(l.a)(u.a.mark((function e(){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,h.a.get("http://localhost:3001/user/profile",{headers:{authorization:"".concat(i)}}).then((function(e){O(e.data)}));case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(r.useEffect)((function(){t||k(),n||w(),v||g(localStorage.getItem("exam"))}),[i,b]),"teacher"===b.usertype?Object(a.jsx)(N,{examid:v}):Object(a.jsx)(I,{examid:v,userid:b.id})},F=function(e){var t=e.token,n=e.profile,c=Object(f.f)(),o=c.path,s=c.url,i=Object(r.useState)(t),d=Object(j.a)(i,2),b=d[0],O=d[1],v=Object(r.useState)(n),g=Object(j.a)(v,2),k=g[0],w=g[1],y=Object(r.useState)(localStorage.getItem("course")),S=Object(j.a)(y,2),C=S[0],N=(S[1],Object(r.useState)([])),I=Object(j.a)(N,2),F=I[0],T=I[1],E=Object(r.useState)(localStorage.getItem("exam")),J=Object(j.a)(E,2),D=J[0],z=J[1],K=function(){var e=Object(l.a)(u.a.mark((function e(){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:O(localStorage.getItem("token"));case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),L=function(){var e=Object(l.a)(u.a.mark((function e(){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,h.a.get("http://localhost:3001/user/profile",{headers:{authorization:"".concat(b)}}).then((function(e){w(e.data)}));case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),P=function(){var e=Object(l.a)(u.a.mark((function e(){var t;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t={user:k.id,course:C},e.next=3,h.a.put("http://localhost:3001/course/exam",t).then((function(e){T(e.data)}));case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),M=function(){var e=Object(l.a)(u.a.mark((function e(){var t;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t={id:D},e.next=3,h.a.put("http://localhost:3001/deleteexam/",t);case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(r.useEffect)((function(){b||K(),k||L(),k&&P()}),[b,k]),Object(r.useEffect)((function(){localStorage.setItem("exam",D),console.log("examjs examid",D)}),[D]),k?Object(a.jsxs)("div",{className:"Tenttilista",children:[Object(a.jsxs)("div",{children:[F.map((function(e,t){return Object(a.jsx)(x.a,{component:p.b,to:"".concat(s,"/").concat(t+1),onClick:function(){return z(e.id)},color:"primary",children:e.name})})),"teacher"===k.usertype?Object(a.jsx)(x.a,{color:"primary",children:" + "}):""]}),Object(a.jsxs)(f.c,{children:[Object(a.jsx)(f.a,{exact:!0,path:o}),Object(a.jsx)(f.a,{path:"".concat(o,"/:examid"),children:Object(a.jsx)(q,{token:b,profile:k,examid:D})})]}),"teacher"===k.usertype?Object(a.jsxs)("div",{className:"sulkuNappi",children:[Object(a.jsxs)(x.a,{onClick:M,color:"secondary",children:[" ",Object(a.jsx)(m.a,{id:"exam.remove"})," "]})," "]}):""]}):Object(a.jsx)(a.Fragment,{children:"."})},T=function(e){var t=e.logIn,n=Object(r.useState)(),c=Object(j.a)(n,2),o=c[0],s=c[1],i=Object(r.useState)(),u=Object(j.a)(i,2),l=u[0],p=u[1];return Object(a.jsx)("div",{className:"Tenttilista",children:Object(a.jsxs)(w.a,{className:"kortti",children:[Object(a.jsx)("div",{children:Object(a.jsx)(y.a,{label:"email",onChange:function(e){return s(e.target.value)}})}),Object(a.jsx)("div",{children:Object(a.jsx)(y.a,{label:"password",onChange:function(e){return p(e.target.value)}})}),Object(a.jsx)("div",{children:Object(a.jsx)(x.a,{onClick:function(){return t(o,l)},children:"Kirjaudu Sis\xe4\xe4n"})})]})})},E=function(e){var t=e.token,n=e.profile,c=Object(r.useState)(t),o=Object(j.a)(c,2),s=o[0],i=o[1],f=Object(r.useState)(n),d=Object(j.a)(f,2),b=d[0],O=d[1],m=Object(r.useState)([]),v=Object(j.a)(m,2),g=v[0],k=v[1],y=function(){var e=Object(l.a)(u.a.mark((function e(){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:i(localStorage.getItem("token"));case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),S=function(){var e=Object(l.a)(u.a.mark((function e(){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:h.a.get("http://localhost:3001/user/profile",{headers:{authorization:"".concat(s)}}).then((function(e){O(e.data),localStorage.setItem("profile",JSON.stringify(e.data))}));case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),C=function(){var e=Object(l.a)(u.a.mark((function e(){var t;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t={id:b.id},e.next=3,h.a.put("http://localhost:3001/mycourse",t).then((function(e){k(e.data)}));case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();Object(r.useEffect)((function(){s||y(),b||S(),b&&C()}),[s,b]);return b&&b.id?Object(a.jsx)("div",{className:"Tenttilista",children:Object(a.jsxs)(w.a,{className:"kortti",children:[Object(a.jsxs)("div",{children:[b.id," | ",b.name," | ",b.email," | ",b.usertype," ",Object(a.jsx)("br",{})]}),Object(a.jsx)("div",{children:g.map((function(e){return Object(a.jsx)("div",{children:Object(a.jsxs)(x.a,{component:p.b,to:"/exam",onClick:function(){return t=e.id,localStorage.setItem("course",t),void console.log("picked",t);var t},children:[" ",e.name," "]})})}))})]})}):Object(a.jsx)(a.Fragment,{})},J=function(){var e=Object(r.useState)(),t=Object(j.a)(e,2),n=t[0],c=t[1],o=Object(r.useState)(),s=Object(j.a)(o,2),i=s[0],f=s[1],d=Object(r.useState)(),b=Object(j.a)(d,2),O=b[0],m=b[1],v=Object(r.useState)(),g=Object(j.a)(v,2),k=g[0],S=g[1],C=function(){var e=Object(l.a)(u.a.mark((function e(){var t;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t={name:n,email:i,password:O,usertype:k},e.next=3,h.a.post("http://localhost:3001/register",t);case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(a.jsx)("div",{className:"Tenttilista",children:Object(a.jsxs)(w.a,{className:"kortti",children:[Object(a.jsx)("div",{children:Object(a.jsx)(y.a,{label:"name",onChange:function(e){return c(e.target.value)}})}),Object(a.jsx)("div",{children:Object(a.jsx)(y.a,{label:"email",onChange:function(e){return f(e.target.value)}})}),Object(a.jsx)("div",{children:Object(a.jsx)(y.a,{label:"password",onChange:function(e){return m(e.target.value)}})}),Object(a.jsxs)("div",{children:[Object(a.jsx)(y.a,{label:"usertype",onChange:function(e){return S(e.target.value)}})," ",Object(a.jsx)("br",{})]}),Object(a.jsx)("div",{children:Object(a.jsx)(x.a,{component:p.b,to:"/",onClick:C,children:"Luo Tili"})})]})})},D=function(e){e.token;var t=e.profile,n=Object(r.useState)([]),c=Object(j.a)(n,2),o=c[0],s=c[1],i=Object(r.useState)([]),p=Object(j.a)(i,2),f=(p[0],p[1]),d=Object(r.useState)(""),b=Object(j.a)(d,2),O=b[0],m=b[1],v=Object(r.useState)(!1),g=Object(j.a)(v,2),k=g[0],S=g[1],C=function(){var e=Object(l.a)(u.a.mark((function e(){var n;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={id:t.id},e.next=3,h.a.put("http://localhost:3001/mycourse",n).then((function(e){s(e.data)}));case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),N=function(){var e=Object(l.a)(u.a.mark((function e(){var n;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={id:t.id},e.next=3,h.a.put("http://localhost:3001/othercourse",n).then((function(e){f(e.data)}));case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),I=function(){var e=Object(l.a)(u.a.mark((function e(){var n;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={id:t.id,name:O},e.next=3,h.a.put("http://localhost:3001/newcourse",n);case 3:S(!k);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),q=function(){var e=Object(l.a)(u.a.mark((function e(t){var n;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={id:t},console.log(t),e.next=4,h.a.put("http://localhost:3001/deletecourse",n);case 4:S(!k);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();Object(r.useEffect)((function(){C(),N()}),[k]);var F=function(){console.log("picked")};return Object(a.jsx)("div",{className:"Tenttilista",children:Object(a.jsxs)(w.a,{className:"kortti",children:[o.map((function(e){return Object(a.jsxs)("div",{children:[Object(a.jsxs)(x.a,{onClick:F,children:[" ",e.name," "]}),Object(a.jsx)(x.a,{onClick:function(){return q(e.id)},color:"secondary",children:" \xd7 "})]})})),Object(a.jsx)("div",{children:Object(a.jsx)(y.a,{label:"Kurssin Nimi",style:{width:"50%"},onChange:function(e){return m(e.target.value)}})}),Object(a.jsx)(x.a,{onClick:I,color:"primary",children:"Uusi Kurssi"})]})})},z=function(e){e.token;var t=e.profile,n=Object(r.useState)([]),c=Object(j.a)(n,2),o=c[0],s=c[1],i=Object(r.useState)([]),p=Object(j.a)(i,2),f=p[0],d=p[1],b=Object(r.useState)(!1),O=Object(j.a)(b,2),m=O[0],v=O[1],g=function(){var e=Object(l.a)(u.a.mark((function e(){var n;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={id:t.id},e.next=3,h.a.put("http://localhost:3001/mycourse",n).then((function(e){s(e.data)}));case 3:v(!m);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),k=function(){var e=Object(l.a)(u.a.mark((function e(){var n;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={id:t.id},e.next=3,h.a.put("http://localhost:3001/othercourse",n).then((function(e){d(e.data)}));case 3:v(!m);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),y=function(){var e=Object(l.a)(u.a.mark((function e(n){var a;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a={userid:t.id,courseid:n},console.log(n),e.next=4,h.a.put("http://localhost:3001/joincourse",a);case 4:v(!m);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),S=function(){var e=Object(l.a)(u.a.mark((function e(n){var a;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a={userid:t.id,courseid:n},console.log(n),e.next=4,h.a.put("http://localhost:3001/leavecourse",a);case 4:v(!m);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(r.useEffect)((function(){g(),k()}),[m]),Object(a.jsx)("div",{className:"Tenttilista",children:Object(a.jsxs)(w.a,{className:"kortti",children:["Minun Kurssini",o.map((function(e){return Object(a.jsx)("div",{children:Object(a.jsxs)(x.a,{onClick:function(){return S(e.id)},children:[" ",e.name," "]})})})),Object(a.jsx)("hr",{}),"Muut Kurssit",f.map((function(e){return Object(a.jsx)("div",{children:Object(a.jsxs)(x.a,{onClick:function(){return y(e.id)},children:[" ",e.name," "]})})}))]})})},K=function(e){var t=e.token,n=e.profile,c=Object(r.useState)(t),o=Object(j.a)(c,2),s=o[0],i=o[1],p=Object(r.useState)(n),f=Object(j.a)(p,2),d=f[0],b=f[1],O=function(){var e=Object(l.a)(u.a.mark((function e(){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:i(localStorage.getItem("token"));case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),x=function(){var e=Object(l.a)(u.a.mark((function e(){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:h.a.get("http://localhost:3001/user/profile",{headers:{authorization:"".concat(s)}}).then((function(e){b(e.data)}));case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(r.useEffect)((function(){s||O(),d||x()}),[s,d]),void 0===d?Object(a.jsx)(a.Fragment,{}):"teacher"===d.usertype?Object(a.jsx)(D,{token:s,profile:d}):Object(a.jsx)(z,{token:s,profile:d})},L=function(e){var t=e.locale;return Object(a.jsxs)("div",{className:"footer",children:[Object(a.jsx)(m.a,{id:"footer.text"})," ",function(e){var t=new Date;return"".concat(new Intl.DateTimeFormat(e).format(t))}(t)," - github.com/jmsalonen/tenttiapp"]})},P=n(60),M=n(83),W=function(){var e=Object(r.useCallback)((function(e){var t={headers:{"Content-Type":"multipart/form-data"}},n=new FormData,a=!1;e.map((function(e,t){n.append("file",e),t>0&&(a=!0)})),a?h.a.post("http://localhost:3001/upload-many",n,t):h.a.post("http://localhost:3001/upload-one",n,t)}),[]),t=Object(M.a)({onDrop:e}),n=t.getRootProps,c=t.getInputProps,o=t.isDragActive;return Object(a.jsxs)("div",Object(P.a)(Object(P.a)({},n()),{},{children:[Object(a.jsx)("input",Object(P.a)({},c())),o?Object(a.jsx)("p",{children:"Drop the files here ..."}):Object(a.jsx)("p",{children:"Drag 'n' drop some files here, or click to select files"})]}))},B=n(165),R={fi:n(81),en:n(82)},V=new WebSocket("ws://localhost:3002"),U=function(){var e=Object(r.useState)(localStorage.getItem("token")),t=Object(j.a)(e,2),n=t[0],c=t[1],o=Object(r.useState)(!1),s=Object(j.a)(o,2),i=s[0],d=s[1],b=Object(r.useState)(JSON.parse(localStorage.getItem("profile"))),O=Object(j.a)(b,2),x=O[0],m=O[1],g=Object(r.useState)("fi"),k=Object(j.a)(g,2),w=k[0],y=k[1],S=function(){var e=Object(l.a)(u.a.mark((function e(){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,h.a.get("http://localhost:3001/user/profile",{headers:{authorization:"".concat(n)}}).then((function(e){m(e.data),localStorage.setItem("profile",JSON.stringify(e.data)),console.log(e.data)}));case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),C=function(){var e=Object(l.a)(u.a.mark((function e(t,n){var a;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a={email:t,password:n},e.next=3,h.a.post("http://localhost:3001/login",a).then((function(e){c(e.data.token),localStorage.setItem("token",e.data.token),S(),V.send(JSON.stringify({type:"login",message:"User ".concat(t," logged in!")}))})).catch((function(){console.log("Log in Error")}));case 3:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),N=function(){var e=Object(l.a)(u.a.mark((function e(){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:localStorage.removeItem("token"),localStorage.removeItem("profile"),localStorage.removeItem("course"),localStorage.removeItem("exam"),c(null),m(null),d(!1);case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(r.useEffect)((function(){var e=JSON.parse(localStorage.getItem("profile"));console.log(e),V.onopen=function(e){console.log("WS opened")},V.onclose=function(e){console.log("WS closed")},V.onmessage=function(t){if(e){var n=JSON.parse(t.data);("login"==n.type&&"teacher"==e.usertype||"edit"==n.type&&"student"==e.usertype||"all"==n.type)&&alert(n.message)}else console.log("no profile")},d(null!==n),i&&S()}),[n]),Object(a.jsx)(p.a,{children:Object(a.jsxs)(B.a,{messages:R[w],children:[Object(a.jsx)(v,{token:n,logOut:N,changeLanguage:function(){y("en"===w?"fi":"en")},websocket:V}),Object(a.jsxs)(f.c,{children:[Object(a.jsx)(f.a,{path:"/exam",children:Object(a.jsx)(F,{token:n,profile:x})}),Object(a.jsx)(f.a,{path:"/register",children:Object(a.jsx)(J,{})}),Object(a.jsx)(f.a,{path:"/course",children:Object(a.jsx)(K,{token:n})}),Object(a.jsx)(f.a,{path:"/dropzone",children:Object(a.jsx)(W,{})}),Object(a.jsx)(f.a,{path:"/",children:i?Object(a.jsx)(E,{token:n,profile:x}):Object(a.jsx)(T,{logIn:C})})]}),Object(a.jsx)(L,{locale:w})]})})},A=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,168)).then((function(t){var n=t.getCLS,a=t.getFID,r=t.getFCP,c=t.getLCP,o=t.getTTFB;n(e),a(e),r(e),c(e),o(e)}))};s.a.render(Object(a.jsx)(c.a.StrictMode,{children:Object(a.jsx)(U,{})}),document.getElementById("root")),A()},81:function(e){e.exports=JSON.parse('{"header.home":"Koti","header.courses":"Kurssit","header.logout":"Poistu","header.login":"Kirjaudu","header.register":"Rekister\xf6idy","header.language":"Vaihda kieli","exam.remove":"Poista tentti","question.newquestion":"Uusi kysymys","footer.text":"T\xe4n\xe4\xe4n on "}')},82:function(e){e.exports=JSON.parse('{"header.home":"Home","header.courses":"Courses","header.logout":"Log out","header.login":"Log in","header.register":"Register","header.language":"Change language","exam.remove":"Remove exam","question.newquestion":"New question","footer.text":"Today is "}')},99:function(e,t,n){}},[[125,1,2]]]);
//# sourceMappingURL=main.219f760a.chunk.js.map